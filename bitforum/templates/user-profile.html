{% load static %}
<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>{{ userprofile.name  }}</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="description" content="" />
<meta name="keywords" content="" />
<link rel="stylesheet" type="text/css" href="{% static 'css/animate.css' %}">
<link rel="stylesheet" type="text/css" href="{% static 'css/bootstrap.min.css' %}">
<link rel="stylesheet" type="text/css" href="{% static 'css/line-awesome.css' %}">
<link rel="stylesheet" type="text/css" href="{% static 'css/line-awesome-font-awesome.min.css' %}">
<link rel="stylesheet" type="text/css" href="{% static 'css/font-awesome.min.css' %}">
<link rel="stylesheet" type="text/css" href="{% static 'lib/slick/slick.css' %}">
<link rel="stylesheet" type="text/css" href="{% static 'lib/slick/slick-theme.css' %}">
<link rel="stylesheet" type="text/css" href="{% static 'css/style.css' %}">
<link rel="stylesheet" type="text/css" href="{% static 'css/responsive.css' %}">
</head>


<body>
	

	<div class="wrapper">
		<header>
			<div class="container">
				<div class="header-data">
					<div class="logo">
						<a href="../" title=""><img src="{% static 'images/logo.png' %}" width="50" height="50" alt=""></a>
					</div><!--logo end-->
					<div class="search-bar">
						<form>
							<input type="text" name="search" placeholder="Search...">
							<button type="submit"><i class="la la-search"></i></button>
						</form>
					</div><!--search-bar end-->
					<nav>
						<ul>
							<li>
								<a href="../" title="">
									<span><img src="{% static 'images/icon1.png' %}" alt=""></span>
									Home
								</a>
							</li>
							<li>
								<a href="#" title="" class="not-box-open">
									<span><img src="{% static 'images/icon7.png' %}" alt=""></span>
									Notification
								</a>
								<div class="notification-box">
									<div class="nt-title">
										<a href="#" title="">Mark as read</a>
									</div>
									<div class="nott-list">
										<div class="notfication-details">
							  				<div class="noty-user-img">
							  					<img src="{% static 'images/resources/ny-img1.png' %}" alt="">
							  				</div>
							  				<div class="notification-info">
							  					<h3><a href="#" title="">Jassica William</a> Comment on your project.</h3>
							  					<span>2 min ago</span>
							  				</div><!--notification-info -->
						  				</div>
						  				<div class="notfication-details">
							  				<div class="noty-user-img">
							  					<img src="{% static 'images/resources/ny-img2.png' %}" alt="">
							  				</div>
							  				<div class="notification-info">
							  					<h3><a href="#" title="">Jassica William</a> Comment on your project.</h3>
							  					<span>2 min ago</span>
							  				</div><!--notification-info -->
						  				</div>
						  				<div class="notfication-details">
							  				<div class="noty-user-img">
							  					<img src="{% static 'images/resources/ny-img3.png' %}" alt="">
							  				</div>
							  				<div class="notification-info">
							  					<h3><a href="#" title="">Jassica William</a> Comment on your project.</h3>
							  					<span>2 min ago</span>
							  				</div><!--notification-info -->
						  				</div>
						  				<div class="notfication-details">
							  				<div class="noty-user-img">
							  					<img src="{% static 'images/resources/ny-img2.png' %}" alt="">
							  				</div>
							  				<div class="notification-info">
							  					<h3><a href="#" title="">Jassica William</a> Comment on your project.</h3>
							  					<span>2 min ago</span>
							  				</div><!--notification-info -->
						  				</div>	
									</div><!--nott-list end-->
								</div><!--notification-box end-->
							</li>
						</ul>
					</nav><!--nav end-->
					<div class="menu-btn">
						<a href="#" title=""><i class="fa fa-bars"></i></a>
					</div><!--menu-btn end-->
					<div class="user-account">
						<div class="user-info" >
							<img src=" ../{{ user.profile_pic }} " height="30" width="30" alt="" style="margin-left:40px">


							<i class="la la-sort-down"></i>
						</div>
						<div class="user-account-settingss">
							<h3>User Profile</h3>
							<ul class="us-links">
								<li><a href="/myProfile" title="">{{user.name}}</a></li>
							</ul>
							<h3 class="tc"><a href="/logout" title="">Logout</a></h3>
						</div><!--user-account-settingss end-->
					</div>
				</div><!--header-data end-->
			</div>
		</header><!--header end-->


		<section class="cover-sec">
			<img src="http://via.placeholder.com/1600x400" alt="">
		</section>


		<main>
			<div class="main-section">
				<div class="container">
					<div class="main-section-data">
						<div class="row">
							<div class="col-lg-3">
								<div class="main-left-sidebar">
									<div class="user_profile">
										<div class="user-pro-img">
											<img src="../{{ userprofile.profile_pic }}" height="170" width="170" alt="">
										</div><!--user-pro-img end-->
										<div class="user_pro_status">
											<ul class="flw-status">
												<li>
													<span>Following</span>
													<b>{{ followers_count }}</b>
												</li>
												<li>
													<span>Followers</span>
													<b>{{ following_count }}</b>
												</li>
											</ul>
                                            <button class="follow-btn" id="follow-btn" value="follow" style="font-size: 16px; background:#3c8dbc;border:0;padding:12px 27px;margin-top:20px;color:white;cursor: pointer;  ">Follow</button>
										</div><!--user_pro_status end-->
									</div><!--user_profile end-->

								</div><!--main-left-sidebar end-->
							</div>
							<div class="col-lg-6">
								<div class="main-ws-sec">
									<div class="user-tab-sec">
										<h3>{{ userprofile.name }}</h3>
                                        <div class="star-descp">
											<span>{{userprofile.status}}</span>

										</div><!--star-descp end-->
									</div><!--user-tab-sec end-->
									<div class="product-feed-tab current" id="feed-dd">
										<div class="posts-section">
                                            {% for post in userPosts %}

											<div class="post-bar">
												<div class="post_topbar">
													<div class="usy-dt">
														<a href="/viewProfile/{{ userprofile.id }}"><img src="../{{ userprofile.profile_pic}} " width="40" height="40" alt=""></a>
														<div class="usy-name">
															<a href="/viewProfile/{{ userprofile.id }}"><h3>{{ userprofile.name }}</h3></a>
															<span><img src="{% static 'images/clock.png' %}" alt="">{{post.post.date_time}}</span>
														</div>
													</div>
													<div class="ed-opts">
														<a href="#" title="" class="ed-opts-open"><i class="la la-ellipsis-v"></i></a>
														<ul class="ed-options">
															<li><a href="#" title="">Edit Post</a></li>
															<li><a href="#" title="">Delete</a></li>
														</ul>
													</div>
												</div>
												<div class="job_descp">
													<a href="/post/{{post.post.id}}" ><h3 style="text-decoration: underline">{{post.post.title}}</h3></a>

													<ul class="skill-tags">
														{% for topic in post.topicsList %}
													<li><a href="#" title="">{{ topic.topic_name }}</a></li>
													{% endfor %}
													</ul>
                                                <p>{{post.post.content | slice:"0:200" | add:"...." }} <a href="/post/{{post.post.id}}" title="">view more</a></p>
												</div>
												<div class="job-status-bar">
													<ul class="like-com">
														<li>

															<a onclick="upvoteAjax(this.name)" name="{{post.post.id}}"  style="cursor:pointer;">

															<i class="fa fa-arrow-circle-up" id="{{post.post.id}}upvote-icon" aria-hidden="true"></i>

																<div style="float: right" id="{{post.post.id}}upvote-count"> {{post.upvote}}  </div></a>
															<a style="cursor: pointer" onclick="downvoteAjax(this.name)" name="{{post.post.id}}" >
																<i class="fa fa-arrow-circle-down" id="{{post.post.id}}downvote-icon"  aria-hidden="true"></i>


																<div style="float: right" id="{{post.post.id}}downvote-count"> {{post.downvote}}  </div></a>

														<a href="/post/{{post.post.id}}"><i class="fa fa-comment" aria-hidden="true"></i>{{post.comments}} Comments</a>
														</li>
													</ul>
													<a><i class="la la-eye"></i>{{post.post.no_of_views}}</a>
												</div>
											</div><!--post-bar end-->
                                            {% endfor %}

											<div class="process-comm">
												<div class="spinner">
													<div class="bounce1"></div>
													<div class="bounce2"></div>
													<div class="bounce3"></div>
												</div>
											</div><!--process-comm end-->
										</div><!--posts-section end-->
									</div><!--product-feed-tab end-->
									
								</div><!--main-ws-sec end-->
							</div>
							<div class="col-lg-3">
								<div class="right-sidebar">
									<div class="suggestions full-width">
										<div class="sd-title">
											<h3>People you may know</h3>
											<i class="la la-ellipsis-v"></i>
										</div><!--sd-title end-->
										<div class="suggestions-list">
											{% for i in people %}
											<div class="suggestion-usd">
												<a href="/viewProfile/{{ i.id }}"><img src="../{{ i.profile_pic }}" height="35" width="35" alt=""></a>
												<div class="sgt-text">
													<a href="/viewProfile/{{ i.id }}"><h4>{{ i.name }}</h4></a>



														<span>{{ i.status | slice:"0:15" | add:"...." }}</span>




												</div>
												<span><i class="la la-plus"></i></span>
											</div>
											{% endfor %}
											<div class="view-more">
												<a href="#" title="">View More</a>
											</div>
										</div><!--suggestions-list end-->
									</div><!--suggestions end-->
								</div><!--right-sidebar end-->
							</div>
						</div>
					</div><!-- main-section-data end-->
				</div> 
			</div>
		</main>


		<footer>
			<div class="footy-sec mn no-margin">
				<div class="container">
					<ul>
						<li><a href="#" title="">All right reserved</a></li>
					</ul>
				</div>
			</div>
		</footer><!--footer end-->
	</div><!--theme-layout end-->

	<script>

		function upvoteAjax(id){


		console.log(id);

		  $.ajax({
				   type: "POST",
				   url: "{% url 'doUpvote' %}",
				   data: {'slug': id, 'csrfmiddlewaretoken': '{{ csrf_token }}'},
				   dataType: "json",
				   success: function(response) {
						  console.log(response.message);
					      if(response.message == 1)
						  {
							  // remove upvote
							  icon = document.getElementById(id+'upvote-icon');
							  	icon.style.color = 'grey';
							  	count = document.getElementById(id+'upvote-count');
							  	console.log(count.innerHTML)
								x = parseInt(count.innerHTML) -1
							  count.innerHTML = x;
						  }
					      else if (response.message == 0)
						  {
								// add upvote
							  	icon = document.getElementById(id+'upvote-icon');
							  	icon.style.color = '#3c8dbc';
							  	count = document.getElementById(id+'upvote-count');
							  	console.log(count.innerHTML)
								x = parseInt(count.innerHTML) +1
							  count.innerHTML = x;
						  }

					},
					error: function(rs, e) {
						   alert(rs.responseText);
					}
			  });
		}

		function downvoteAjax(id){


		console.log(id);

		  $.ajax({
				   type: "POST",
				   url: "{% url 'doDownvote' %}",
				   data: {'slug': id, 'csrfmiddlewaretoken': '{{ csrf_token }}'},
				   dataType: "json",
				   success: function(response) {
						  console.log(response.message);
					      if(response.message == 1)
						  {
							  // remove downvote
							  icon = document.getElementById(id+'downvote-icon');
							  	icon.style.color = 'grey';
							  	count = document.getElementById(id+'downvote-count');
							  	console.log(count.innerHTML)
								x = parseInt(count.innerHTML) -1
							  count.innerHTML = x;
						  }
					      else if (response.message == 0)
						  {
								// add upvote
							  	icon = document.getElementById(id+'downvote-icon');
							  	icon.style.color = 'red';
							  	count = document.getElementById(id+'downvote-count');
							  	console.log(count.innerHTML)
								x = parseInt(count.innerHTML) +1
							  count.innerHTML = x;
						  }

					},
					error: function(rs, e) {
						   alert(rs.responseText);
					}
			  });
		}



	</script>

<script type="text/javascript" src="{% static 'js/jquery.min.js' %}"></script>
<script type="text/javascript" src="{% static 'js/popper.js' %}"></script>
<script type="text/javascript" src="{% static 'js/bootstrap.min.js' %}"></script>
<script type="text/javascript" src="{% static 'lib/slick/slick.min.js' %}"></script>
<script type="text/javascript" src="{% static 'js/script.js' %}"></script>
</body>
</html>